@page "/"

@using LocalOfferts.Data
@using LocalOfferts.Service

@inject IProductService ProductService

<style>
    .card {
        box-shadow: 0 0 1em grey;
        padding: 4px 3px;
        border-radius: 15px/5px;
    }
   
   
</style>


@if (products == null)
{
    <p>Loading..</p>

}
else
{
    
    <div class="container">
        
            <div class="card-columns">
                @foreach (var pro in products)
                {


                    <div class="card" >
                        @if (pro.Image is null)
                        {
                            <img class="card-img-top" src="/css/static/kot.jpg" alt="Card image cap">
                        }
                        else
                        {
                            <img class="card-img-top " src="@convertImageToDisplay(pro.Image)" />
                        }

                        <div class="card-body">
                            <h4 style="text-align: center; font-family: 'American Typewriter, serif'">@pro.ProductName</h4>
                            <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>

                        </div>
                        <div class="card-footer">
                            <button type="button" class="btn btn-outline-secondary"> check </button></div>
                    </div>
                    <br />

                   

                }

            </div>
        </div>
 
    <br />


}





@code
{
    IEnumerable<Product> products;

    protected override async Task OnInitializedAsync()
    {

        products = await ProductService.GetProducts();

    }

    string convertImageToDisplay(byte[] image)
    {
        if (image != null)
        {
            var base64 = Convert.ToBase64String(image);
            var fs = string.Format("data:image/jpg;base64,{0}", base64);
            return fs;
        }
        return "";
    }

}

